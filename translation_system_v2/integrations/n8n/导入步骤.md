# 📥 导入工作流步骤（100%有效）

## 方法：从文件导入

---

## 步骤 1: 打开 n8n

访问：http://localhost:5678

---

## 步骤 2: 点击导入

在 n8n 界面：

1. 点击右上角的 **"..."** 菜单（三个点）
2. 选择 **"Import from URL / File"**

---

## 步骤 3: 选择文件导入

在弹出的对话框中：

1. 选择 **"From file"** 标签
2. 点击 **"Select file"** 或 **"Choose file"** 按钮
3. 浏览到文件：
   ```
   /mnt/d/work/trans_excel/translation_system_v2/integrations/n8n/workflows/final_working_workflow.json
   ```
4. 或者在 Windows 文件浏览器中输入：
   ```
   D:\work\trans_excel\translation_system_v2\integrations\n8n\workflows\final_working_workflow.json
   ```
5. 点击 **"打开"** 或 **"Open"**
6. 点击 **"Import"** 确认导入

---

## 步骤 4: 检查工作流

导入后你会看到 3 个节点：

```
表单 → 提交任务 → 返回结果
```

**检查**：
- ✅ 3个节点有线连接
- ✅ 节点名称正确（表单、提交任务、返回结果）
- ✅ 没有红色错误标记

---

## 步骤 5: 激活工作流

1. 点击右上角 **"Inactive"** 开关
   - 开关变成 **"Active"**（绿色）

2. 点击 **"Save"** 按钮保存

3. 等待几秒，确保状态还是 "Active"

---

## 步骤 6: 获取表单 URL

1. 点击第一个节点 **"表单"**

2. 在右侧面板找到 **"Webhook URLs"** 部分

3. 你会看到：
   - **Test URL**: 测试用（工作流未激活时）
   - **Production URL**: 生产用（工作流激活后）✅

4. 复制 **Production URL**

   格式类似：
   ```
   http://localhost:5678/form/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
   ```

---

## 步骤 7: 测试表单

在浏览器新标签页访问复制的 URL

你会看到：

```
┌────────────────────────────────┐
│  📄 Excel翻译                   │
│  上传Excel文件进行翻译           │
├────────────────────────────────┤
│  Excel文件 *                    │
│  [选择文件]                     │
│                                │
│  目标语言 *                     │
│  [下拉选择]                     │
│  □ 英文                        │
│  □ 泰文                        │
│                                │
│  [提交]                         │
└────────────────────────────────┘
```

---

## ✅ 成功标志

- ✅ 能看到表单界面
- ✅ 可以选择文件
- ✅ 可以选择语言
- ✅ 提交后返回 JSON 响应（包含 session_id）

---

## 🎯 提交后的响应

点击提交后，你会看到类似的响应：

```json
{
  "成功": true,
  "会话ID": "abc-123-def-456",
  "查询状态": "http://localhost:8013/api/tasks/split/status/abc-123-def-456",
  "下载地址": "http://localhost:8013/api/download/abc-123-def-456"
}
```

**使用方法**：
1. 复制 "会话ID"
2. 用 "查询状态" 链接查看翻译进度
3. 翻译完成后，用 "下载地址" 链接下载结果

---

## ❓ 如果找不到文件怎么办？

### 方法1: 使用 WSL 路径

在 Windows 文件选择器中：
```
\\wsl$\Ubuntu\mnt\d\work\trans_excel\translation_system_v2\integrations\n8n\workflows\final_working_workflow.json
```

### 方法2: 复制到 Windows 目录

```bash
# 在 WSL 中运行
cp /mnt/d/work/trans_excel/translation_system_v2/integrations/n8n/workflows/final_working_workflow.json /mnt/c/Users/你的用户名/Desktop/workflow.json
```

然后从桌面选择文件。

### 方法3: 在 Windows 中直接访问

打开 Windows 文件浏览器，输入：
```
D:\work\trans_excel\translation_system_v2\integrations\n8n\workflows\final_working_workflow.json
```

---

## 🆘 导入失败？

**检查**：
1. 文件是否存在：
   ```bash
   ls -lh /mnt/d/work/trans_excel/translation_system_v2/integrations/n8n/workflows/final_working_workflow.json
   ```

2. JSON 格式是否正确：
   ```bash
   cat /mnt/d/work/trans_excel/translation_system_v2/integrations/n8n/workflows/final_working_workflow.json | python3 -m json.tool
   ```

3. n8n 是否运行：
   ```bash
   curl http://localhost:5678/healthz
   ```

---

**现在去 n8n 导入文件吧！** 🚀

文件路径（复制用）：
```
/mnt/d/work/trans_excel/translation_system_v2/integrations/n8n/workflows/final_working_workflow.json
```

或 Windows 路径：
```
D:\work\trans_excel\translation_system_v2\integrations\n8n\workflows\final_working_workflow.json
```
