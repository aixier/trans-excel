# Translation System Frontend V2 - React 18 å®æ–½æ–¹æ¡ˆ

## ğŸ¯ æŠ€æœ¯é€‰å‹ï¼ˆç¡®å®šæ–¹æ¡ˆï¼‰

**æ ¸å¿ƒæŠ€æœ¯æ ˆï¼šçº¯ React 18 + Vite + TypeScript**

```json
{
  "framework": "React 18.2",
  "bundler": "Vite 5.0",
  "language": "TypeScript 5.0",
  "routing": "React Router 6.20",
  "state": "Zustand 4.4",
  "ui": "Ant Design 5.12",
  "http": "Axios 1.6",
  "websocket": "Native WebSocket",
  "charts": "Recharts 2.10",
  "excel": "SheetJS (xlsx)",
  "styles": "CSS Modules + Tailwind CSS"
}
```

## ğŸ“ é¡¹ç›®ç»“æ„ï¼ˆæ¨¡å—åŒ–è®¾è®¡ï¼‰

```
frontend_v2/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ modules/                # ä¸šåŠ¡æ¨¡å—ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ upload/             # ä¸Šä¼ æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts          # APIæ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ store.ts        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks.ts        # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # æ¨¡å—ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UploadPanel.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FilePreview.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UploadProgress.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts        # ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ index.ts        # æ¨¡å—å¯¼å‡º
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ analysis/           # åˆ†ææ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ store.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ translation/        # ç¿»è¯‘æ‰§è¡Œæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ store.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ monitor/            # ç›‘æ§æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ export/             # å¯¼å‡ºæ¨¡å—
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                 # å…±äº«èµ„æº
â”‚   â”‚   â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”‚   â”œâ”€â”€ Loading/
â”‚   â”‚   â”‚   â””â”€â”€ ErrorBoundary/
â”‚   â”‚   â”œâ”€â”€ hooks/              # é€šç”¨Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useNotification.ts
â”‚   â”‚   â”‚   â””â”€â”€ useDebounce.ts
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validate.ts
â”‚   â”‚   â”‚   â””â”€â”€ storage.ts
â”‚   â”‚   â””â”€â”€ types/              # å…¨å±€ç±»å‹
â”‚   â”‚       â”œâ”€â”€ api.types.ts
â”‚   â”‚       â””â”€â”€ common.types.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ api/                # APIé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts       # Axioså®ä¾‹
â”‚   â”‚   â”‚   â”œâ”€â”€ interceptors.ts # æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â””â”€â”€ config.ts       # APIé…ç½®
â”‚   â”‚   â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â””â”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”œâ”€â”€ UploadPage.tsx
â”‚   â”‚   â”œâ”€â”€ AnalysisPage.tsx
â”‚   â”‚   â”œâ”€â”€ TranslationPage.tsx
â”‚   â”‚   â”œâ”€â”€ MonitorPage.tsx
â”‚   â”‚   â””â”€â”€ ExportPage.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                 # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ global.css
â”‚   â”‚   â”œâ”€â”€ variables.css
â”‚   â”‚   â””â”€â”€ tailwind.css
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                 # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ vite-env.d.ts          # Viteç±»å‹å£°æ˜
â”‚
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚   â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. åˆå§‹åŒ–é¡¹ç›®ï¼ˆ30ç§’ï¼‰
```bash
# åˆ›å»ºé¡¹ç›®
npm create vite@latest . -- --template react-ts

# å®‰è£…æ ¸å¿ƒä¾èµ–
npm install axios zustand react-router-dom antd @ant-design/icons

# å®‰è£…å¼€å‘ä¾èµ–
npm install -D @types/node tailwindcss postcss autoprefixer

# åˆå§‹åŒ–Tailwind
npx tailwindcss init -p
```

### 2. é…ç½®æ–‡ä»¶

**vite.config.ts**
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true
      },
      '/ws': {
        target: 'ws://localhost:8000',
        ws: true
      }
    }
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      '@modules': path.resolve(__dirname, './src/modules'),
      '@shared': path.resolve(__dirname, './src/shared'),
      '@core': path.resolve(__dirname, './src/core'),
      '@pages': path.resolve(__dirname, './src/pages')
    }
  }
})
```

**tsconfig.json**
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "paths": {
      "@/*": ["./src/*"],
      "@modules/*": ["./src/modules/*"],
      "@shared/*": ["./src/shared/*"],
      "@core/*": ["./src/core/*"],
      "@pages/*": ["./src/pages/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

## ğŸ“ å¼€å‘è§„èŒƒ

### 1. æ¨¡å—åŒ–åŸåˆ™
- æ¯ä¸ªæ¨¡å—å®Œå…¨ç‹¬ç«‹ï¼ŒåŒ…å«è‡ªå·±çš„ apiã€storeã€hooksã€components
- æ¨¡å—é—´é€šè¿‡äº‹ä»¶æˆ–å…¬å…±storeé€šä¿¡ï¼Œé¿å…ç›´æ¥å¼•ç”¨
- æ¨¡å—å¯¹å¤–åªæš´éœ²å¿…è¦çš„æ¥å£ï¼ˆé€šè¿‡index.tsï¼‰

### 2. å‘½åè§„èŒƒ
- ç»„ä»¶ï¼šPascalCaseï¼ˆå¦‚ `UploadPanel.tsx`ï¼‰
- å·¥å…·å‡½æ•°ï¼šcamelCaseï¼ˆå¦‚ `formatDate.ts`ï¼‰
- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆå¦‚ `API_BASE_URL`ï¼‰
- ç±»å‹ï¼šPascalCase + åç¼€ï¼ˆå¦‚ `UploadConfig.type.ts`ï¼‰

### 3. çŠ¶æ€ç®¡ç†è§„èŒƒ
- å±€éƒ¨çŠ¶æ€ï¼šä½¿ç”¨ useState
- æ¨¡å—çŠ¶æ€ï¼šä½¿ç”¨æ¨¡å—å†…çš„ Zustand store
- å…¨å±€çŠ¶æ€ï¼šä½¿ç”¨ shared storeï¼ˆå°½é‡é¿å…ï¼‰

### 4. APIè°ƒç”¨è§„èŒƒ
```typescript
// ç»Ÿä¸€çš„APIè°ƒç”¨æ¨¡å¼
export const uploadApi = {
  upload: (file: File) =>
    apiClient.post<UploadResponse>('/api/upload', file),

  getStatus: (sessionId: string) =>
    apiClient.get<SessionStatus>(`/api/sessions/${sessionId}`)
}
```

## ğŸ¯ å¼€å‘é˜¶æ®µï¼ˆ15å¤©å®Œæˆï¼‰

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„ï¼ˆ2å¤©ï¼‰
- [ ] é¡¹ç›®åˆå§‹åŒ–å’Œé…ç½®
- [ ] è·¯ç”±ç³»ç»Ÿæ­å»º
- [ ] APIå®¢æˆ·ç«¯é…ç½®
- [ ] åŸºç¡€å¸ƒå±€ç»„ä»¶

### ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ5å¤©ï¼‰
- [ ] ä¸Šä¼ æ¨¡å—
- [ ] åˆ†ææ¨¡å—
- [ ] ä»»åŠ¡æ‹†åˆ†æ¨¡å—
- [ ] ç¿»è¯‘æ‰§è¡Œæ¨¡å—

### ç¬¬ä¸‰é˜¶æ®µï¼šå®æ—¶åŠŸèƒ½ï¼ˆ3å¤©ï¼‰
- [ ] WebSocketè¿æ¥
- [ ] å®æ—¶è¿›åº¦å±•ç¤º
- [ ] ç›‘æ§é¢æ¿

### ç¬¬å››é˜¶æ®µï¼šå®Œå–„åŠŸèƒ½ï¼ˆ3å¤©ï¼‰
- [ ] ç»“æœå±•ç¤º
- [ ] å¯¼å‡ºä¸‹è½½
- [ ] é”™è¯¯å¤„ç†

### ç¬¬äº”é˜¶æ®µï¼šä¼˜åŒ–æµ‹è¯•ï¼ˆ2å¤©ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•

## ğŸ”§ æ ¸å¿ƒæ¨¡å—ç¤ºä¾‹

### Uploadæ¨¡å—å®Œæ•´å®ç°

**modules/upload/types.ts**
```typescript
export interface UploadState {
  file: File | null
  sessionId: string | null
  uploading: boolean
  progress: number
  error: string | null
}

export interface UploadResponse {
  session_id: string
  filename: string
  status: string
}
```

**modules/upload/api.ts**
```typescript
import { apiClient } from '@core/api/client'
import type { UploadResponse } from './types'

export const uploadApi = {
  upload: async (file: File): Promise<UploadResponse> => {
    const formData = new FormData()
    formData.append('file', file)
    return apiClient.post('/api/upload', formData)
  }
}
```

**modules/upload/store.ts**
```typescript
import { create } from 'zustand'
import { uploadApi } from './api'
import type { UploadState } from './types'

export const useUploadStore = create<UploadState & {
  upload: (file: File) => Promise<void>
  reset: () => void
}>((set) => ({
  file: null,
  sessionId: null,
  uploading: false,
  progress: 0,
  error: null,

  upload: async (file: File) => {
    set({ uploading: true, progress: 0, error: null, file })

    try {
      const response = await uploadApi.upload(file)
      set({
        sessionId: response.session_id,
        uploading: false,
        progress: 100
      })
    } catch (error) {
      set({
        error: error.message,
        uploading: false
      })
    }
  },

  reset: () => set({
    file: null,
    sessionId: null,
    uploading: false,
    progress: 0,
    error: null
  })
}))
```

**modules/upload/components/UploadPanel.tsx**
```tsx
import React from 'react'
import { Upload, Button, Progress, message } from 'antd'
import { UploadOutlined } from '@ant-design/icons'
import { useUploadStore } from '../store'

export const UploadPanel: React.FC = () => {
  const { upload, uploading, progress, error } = useUploadStore()

  const handleBeforeUpload = (file: File) => {
    const isExcel = file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
      || file.type === 'application/vnd.ms-excel'

    if (!isExcel) {
      message.error('åªèƒ½ä¸Šä¼ Excelæ–‡ä»¶!')
      return false
    }

    const isLt10M = file.size / 1024 / 1024 < 10
    if (!isLt10M) {
      message.error('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB!')
      return false
    }

    upload(file)
    return false
  }

  return (
    <div className="upload-panel p-6 bg-white rounded-lg shadow">
      <Upload
        beforeUpload={handleBeforeUpload}
        showUploadList={false}
        disabled={uploading}
      >
        <Button
          icon={<UploadOutlined />}
          loading={uploading}
          size="large"
        >
          {uploading ? 'ä¸Šä¼ ä¸­...' : 'é€‰æ‹©Excelæ–‡ä»¶'}
        </Button>
      </Upload>

      {uploading && (
        <Progress
          percent={progress}
          status="active"
          className="mt-4"
        />
      )}

      {error && (
        <div className="mt-4 text-red-500">
          é”™è¯¯: {error}
        </div>
      )}
    </div>
  )
}
```

**modules/upload/index.ts**
```typescript
// æ¨¡å—ç»Ÿä¸€å¯¼å‡º
export { UploadPanel } from './components/UploadPanel'
export { useUploadStore } from './store'
export type { UploadState, UploadResponse } from './types'
```

## ğŸ¨ UIè®¾è®¡åŸåˆ™

1. **ç®€æ´æ¸…æ™°**ï¼šåŠŸèƒ½æ˜ç¡®ï¼Œæ“ä½œç›´è§‚
2. **å“åº”å¼åé¦ˆ**ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰å³æ—¶åé¦ˆ
3. **é”™è¯¯å‹å¥½**ï¼šé”™è¯¯ä¿¡æ¯æ¸…æ™°ï¼Œæä¾›è§£å†³æ–¹æ¡ˆ
4. **æ€§èƒ½ä¼˜å…ˆ**ï¼šå¤§æ•°æ®é‡æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

1. **ä»£ç åˆ†å‰²**ï¼šè·¯ç”±çº§åˆ«çš„æ‡’åŠ è½½
2. **çŠ¶æ€ä¼˜åŒ–**ï¼šä½¿ç”¨Zustandçš„æµ…æ¯”è¾ƒ
3. **ç»„ä»¶ä¼˜åŒ–**ï¼šReact.memoå’ŒuseMemo
4. **è¯·æ±‚ä¼˜åŒ–**ï¼šè¯·æ±‚ç¼“å­˜å’Œé˜²æŠ–
5. **æ‰“åŒ…ä¼˜åŒ–**ï¼šTree-shakingå’ŒæŒ‰éœ€åŠ è½½

## ğŸ§ª æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•**ï¼šæµ‹è¯•å·¥å…·å‡½æ•°å’Œhooks
2. **ç»„ä»¶æµ‹è¯•**ï¼šæµ‹è¯•UIç»„ä»¶äº¤äº’
3. **é›†æˆæµ‹è¯•**ï¼šæµ‹è¯•æ¨¡å—é—´åä½œ
4. **E2Eæµ‹è¯•**ï¼šæµ‹è¯•å®Œæ•´ä¸šåŠ¡æµç¨‹

## ğŸ“¦ éƒ¨ç½²æ–¹æ¡ˆ

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview

# éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆé™æ€æ–‡ä»¶ï¼‰
scp -r dist/* user@server:/var/www/translation-frontend/
```

## ğŸ¯ é¡¹ç›®é‡Œç¨‹ç¢‘

- **ç¬¬3å¤©**ï¼šå®ŒæˆåŸºç¡€æ¶æ„ï¼Œå¯ä»¥ä¸Šä¼ æ–‡ä»¶
- **ç¬¬7å¤©**ï¼šå®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼Œå¯ä»¥æ‰§è¡Œç¿»è¯‘
- **ç¬¬10å¤©**ï¼šå®Œæˆå®æ—¶åŠŸèƒ½ï¼Œå¯ä»¥çœ‹åˆ°è¿›åº¦
- **ç¬¬13å¤©**ï¼šå®Œæˆæ‰€æœ‰åŠŸèƒ½ï¼Œå¯ä»¥å¯¼å‡ºç»“æœ
- **ç¬¬15å¤©**ï¼šå®Œæˆæµ‹è¯•ä¼˜åŒ–ï¼Œå‡†å¤‡ä¸Šçº¿

## ğŸ“š å‚è€ƒèµ„æº

- [React 18 æ–‡æ¡£](https://react.dev/)
- [Vite æ–‡æ¡£](https://vitejs.dev/)
- [Zustand æ–‡æ¡£](https://github.com/pmndrs/zustand)
- [Ant Design æ–‡æ¡£](https://ant.design/)
- [React Router æ–‡æ¡£](https://reactrouter.com/)